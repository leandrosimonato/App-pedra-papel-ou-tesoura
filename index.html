<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="./css/style.css" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Bakbak+One&display=swap" rel="stylesheet">
		<title>Pedra ou Papel ou Tesoura.</title>
	</head>

	<body>
		<h1 class="title-cabecalho">
			Pedra ou Papel ou Tesoura!
		</h1>
		<h2 class="vencedor">

		</h2>
		<hr>
		<div class="align">
			<div class="player-options">
				<div><img opt="Pedra" src="./images/rock.png" /></div>
				<div><img opt="Papel" src="./images/paper.png" /></div>
				<div><img opt="Tesoura" src="./images/scissor.png" /></div>
			</div>

			<div class="enemy-options">
				<div><img opt="Pedra" src="./images/rock.png" /></div>
				<div><img opt="Papel" src="./images/paper.png" /></div>
				<div><img opt="Tesoura" src="./images/scissor.png" /></div>
			</div>
		</div>
		<script>
			var elementos = document.querySelectorAll('.player-options div > img');
			var playerOpt = "";
			var inimigoOpt = "";

			function validaVitoria() {
				let vencedor = document.querySelector('.vencedor')
				if (playerOpt == "Papel") {
					if (inimigoOpt == "Papel") {
						// Empatamos!
						vencedor.innerHTML = "O jogo empatou!";
					} else if (inimigoOpt == "Tesoura") {
						// O inimigo ganhou!
						vencedor.innerHTML = "O inimigo ganhou!";
					} else if (inimigoOpt == "Pedra") {
						// Player ganhou!
						vencedor.innerHTML = "O player ganhou!";
					}
				}
				if (playerOpt == "Tesoura") {
					if (inimigoOpt == "Papel") {
						// Player ganhou!
						vencedor.innerHTML = "O player ganhou!";
					} else if (inimigoOpt == "Tesoura") {
						// Empatamos!
						vencedor.innerHTML = "O jogo empatou!";
					} else if (inimigoOpt == "Pedra") {
						// O inimigo ganhou!
						vencedor.innerHTML = "O inimigo ganhou!";
					}
				}
				if (playerOpt == "Pedra") {
					if (inimigoOpt == "Papel") {
						// O inimigo ganhou!
						vencedor.innerHTML = "O inimigo ganhou!";
					} else if (inimigoOpt == "Tesoura") {
						// Player ganhou!
						vencedor.innerHTML = "O player ganhou!";
					} else if (inimigoOpt == "Pedra") {
						// Empatamos!
						vencedor.innerHTML = "O jogo empatou!";
					}
				}
			}

			function resetInimigo() {
				const enemyOptions = document.querySelectorAll('.enemy-options div');
				for (var i = 0; i < enemyOptions.length; i++) {
					enemyOptions[i].childNodes[0].style.opacity = 0.3;
				}
			}

			function inimigoJogar() {
				let rand = Math.floor(Math.random() * 3);
				const enemyOptions = document.querySelectorAll('.enemy-options div');
				resetInimigo();
				for (var i = 0; i < enemyOptions.length; i++) {
					if (i == rand) {
						enemyOptions[i].childNodes[0].style.opacity = 1;
						inimigoOpt = enemyOptions[i].childNodes[0].getAttribute('opt')
					}
				}

				validaVitoria();

				// alert(playerOpt);
				// alert(inimigoOpt);
			}

			function resetOpacityPlayer() {
				for (var i = 0; i < elementos.length; i++) {
					elementos[i].style.opacity = 0.3;
				}
			}

			for (var i = 0; i < elementos.length; i++) {
				elementos[i].addEventListener('click', function (t) {
					resetOpacityPlayer();
					t.target.style.opacity = 1;
					playerOpt = t.target.getAttribute('opt');

					inimigoJogar();
					alert(playerOpt);
				});
			}

		</script>
	</body>

</html>
